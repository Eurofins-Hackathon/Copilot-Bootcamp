# Navigating the Code Clouds: Advanced Features of GitHub Copilot 
This lab exercise explores GitHub Copilot's advanced features, guiding participants through complex coding tasks to enhance problem-solving and code optimization skills. The session, estimated at 30 minutes, includes adding new properties to models, generating documentation, refactoring code for better maintainability, and parsing complex strings into models using Copilot's AI capabilities. Optional labs further demonstrate Copilot's versatility in understanding context and applying regular expressions for parsing. Through interactive tasks, participants learn to leverage Copilot for more efficient coding practices.

## Prerequisites
- The prerequisites steps are completed, see [Labs Prerequisites](https://github.com/XpiritBV/Copilot-Bootcamp#labs-prerequisites)

## Estimated time to complete
- 30 min

## Objectives
- Exploring advanced features and capabilities of GitHub Copilot.
- Participants tackle more complex coding exercises with Copilot, focusing on AI's role in problem-solving and code optimization.

### Step 1: - The Complete Wright Brothers Fleet

- Open the `Plane.cs` file located in the `Models` folder.

- Add a `ImageUrl` property to the model.

- Type `public string ImageUrl { get; set; }` in the `Plane.cs` file.

```csharp
public class Plane
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Year { get; set; }
    public string Description { get; set; }
    public int RangeInKm { get; set; }

    // New property
    public string ImageUrl { get; set; }
}
```

- Open the `PlanesController.cs` file.

- Select all content of the `Planes` List.

    ![Image of TBD](/Images/Screenshot123719.png)

- Right click and select the option `Copilot` -> `Start Inline Chat`.

- Type the following command

    ```
    Add the new ImageUrl property and complete the Wright Brothers Fleet
    ```

    ![Image of TBD](/Images/Screenshot124031.png)

- Accept the suggestion by selecting `Accept` or pressing `Enter`.

>[!Note]
> GitHub Copilot can do more than one thing at a time. It added the new property and filled in the list of planes.

### Step 2: - Flight Logbook - Logging Your Coding Journey

- Open the `PlanesController.cs` file.

- Select all content of the `PlanesController.cs` file.

- Right click and choose for the option `Copilot` -> `Generate Docs`.

TODO:  [Screenshot] - Select all - Right click - Generate Docs
![Image of TBD](/Images/placeholder-Small.png)

- Accept the suggestion by selecting `Accept`.

TODO:  [Screenshot] - Accept
![Image of TBD](/Images/placeholder-Small.png)

> [!Note]
> GitHub Copilot used the `/docs` agent to generate the documentation for the entire file in a matter of seconds.

### Step 3: - Flying in Formation - Pair Programming with Copilot

- Open the `FlightsController.cs` file located in the `Controllers` folder.

- Navigate to the `UpdateFlightStatus` method.

> [!Note]
> Note that the `UpdateFlightStatus` method has a high code complexity rating of 8.

- Select all the content of the `UpdateFlightStatus` method.

- Open the Copilot Chat extension.

- Ask the following question:

    ```
    Refactor the selected code to make it more readable and maintainable.
    ```

> [!Note]
> GitHub Copilot Chat understands `the selected code`. It will use the selected code in your editor to generate the refactoring suggestions.

> Copilot Chat: "The current code is a bit lengthy and has a lot of conditional statements. We can refactor it by extracting the validation logic into separate methods. This will make the code more readable and maintainable. Here's how we can do it:"

> [!Note]
> To make it more readable and maintainable, Copilot will suggest to extract the code into a separate method, appying the Single Responsibility Principle of the SOLID principles.

> [!Note]
> Note that GitHub Copilot Chat can make mistakes sometimes. Best practice is to have the method covered with unit tests before refactoring it. This is not a requirement for this lab, but it is a good practice to follow. These unit tests can be generated by GitHub Copilot as well, which is covered in a previous lab.

## Optional

### Step 4: - Parsing Flight Show - String parsing

- Open the `FlightController.cs` file.

- Go to the List of Flights:

    ```csharp
    public class FlightsController : ControllerBase
    {
        private List<Flight> Flights = new List<Flight>
        {
            new Flight
            {
                // Other Properties
                // ...
                // Format: DDMMYY-DEP-ARR-FLIGHT
                // For this flight
                // 17th of December 1903
                // Departure from Kitty Hawk, NC
                // Arrival at Manteo, NC
                // Flight number WB001
                FlightLogSignature = "171203-DEP-ARR-WB001"

            },
            // Second flight
        };
    }

    ```

> [!Note]
> Note that the `FlightLogSignature` is a fictional property that is used to demonstrate the capabilities of GitHub Copilot. It is not a real aviation concept.

- Select all the content of the `FlightLogSignature` property and its description.

    ![Image of TBD](/Images/Screenshot125047.png)

- Open the Copilot Chat extension and ask the following question:

    ```
    Create separate files to parse the selected FlightLogSignature string into a c# model?
    ```

- Copilot will suggest a new `Log` class and a `Parse` method:

> [!Note]
> Copilot Chat: "You can create a model class FlightLog with properties for each part of the FlightLogSignature string. Then, you can create a method that splits the string and assigns each part to the corresponding property. Here's an example:"

    ```csharp
    public class FlightLog
    {
        public DateTime Date { get; set; }
        public string Departure { get; set; }
        public string Arrival { get; set; }
        public string FlightNumber { get; set; }
    }
    ```

- A method that splits the string and assigns each part to the corresponding property.

    ```csharp
    public FlightLog Parse(string flightLogSignature)
    {
        // method body
    }
    ```

- Here is how to use this class:

    ```csharp
    var flightLog = FlightLog.Parse("171203-DEP-ARR-WB001");
    ```

> [!Note]
> GitHub Copilot is very good at understanding the context of the code. It understands that the `FlightLogSignature` is a string in a specific format and that it can be parsed into a `FlightLogSignature` model, to make the code more readable and maintainable.


- Let's go ahead and add the suggested `Parse` method to the `FlightsController.cs` class. 

> [!CAUTION]
> Thijs, the follow steps aren't working. Need to run through this.

- Open `FlightsController.cs` file.

- Place your cursor at the end of the file, after the `}` of the `UpdateFlightStatus` method.

    ```csharp
    [HttpPost("{id}/status")]
    public ActionResult UpdateFlightStatus(int id, FlightStatus newStatus)
    {
        // method body
    }

    <---- Place your cursor here

    ```

- In the Copilot Chat extension window, press the button to insert the suggested `Parse` method at the cursor.

    ![Image of TBD](/Images/placeholdersmall.png)

- Most likley, Copilot Chat inserted both the `Log` class and `Parse` method in the `FlightsController.cs` file. Let's move the `Log` class to a separate file.

- Select the entire `Log` class and press `Ctrl-X` to cut it to the clipboard.
.
    ```csharp
    public class FlightLog
    {
        public DateTime Date { get; set; }
        public string Departure { get; set; }
        public string Arrival { get; set; }
        public string FlightNumber { get; set; }
    }
    ```

- Click on `File Explorer` in the left pane of Visual Studio Code. Right-click on the `Models` folder and choose `New File`. Name the file `FlightLog.cs` and press `Enter`.
- Open the `FlightLog.cs` file and paste the `Log` class into it.
- Press `Ctrl-S` to save the file.

    ![Image of TBD](/Images/placeholder-small.png)

> [!Note]
> GitHub Copilot has many quick actions that can be used to speed up the development process. In this case, it pasted the suggested code on the cursor in the editor. 

~~- Now add the suggested `FlightLogSignature` model to the codebase. In the Copilot Chat extension window, press the button to create a new file based on the suggestion.~~

    ```csharp
    public class FlightsController : ControllerBase
    {
        /* Rest of the methods */

        [HttpPut("{id}")]
        public ActionResult<Flight> UpdateFlightStatus(int id, Flight flight)
        {
            // method body
        }

        <---- Place your cursor here
    }
    ```

TODO: Add a Screenshot here! - Create new file in the Copilot Chat extension
![Image of TBD](/Images/placeholder-Small.png)

- In the Copilot Chat extension window, press the button to add the method to the `FlightsController.cs` class.

[Screenshot] - Add method to the `FlightsController.cs` class in the Copilot Chat extension.
![Image of TBD](/Images/placeholder-Small.png)


> [!Note]
> GitHub Copilot has many quick actions that can be used to speed up the development process. In this case, it added the `Parse` method to the `FlightsController.cs` class.


#### Step 5: - Regex Aerobatics Show - Regular Expressions

- Open the `Flight.cs` file.

- Start by adding the `AerobaticSequence` property to the `Flight.cs` file.

    ```csharp
    public class Flight
    {
        
        // Other properties
        //
        // ...
        // 
        // Encodes a series of aerobatic maneuvers
        // L = Loop, H = Hammerhead, R = Roll, S = Spin, T = Tailslide
        // Number represents repeat count, 
        // Letter represents difficulty (A-E)
        // Example 1: L4B-H2C-R3A-S1D-T2E
        // Example 2: L1A-H1B-R1C-S1D-T1E
        public string AerobaticSequence { get; set; }
    }

    ```

> [!Note]
> Note that the `AerobaticSequence` is a fictional property that is used to demonstrate the capabilities of GitHub Copilot. It is not a real aviation concept.

- Select all the content of the `AerobaticSequence` property and its description.

    ![Image of TBD](/Images/Screenshot134718.png)

- Open the Copilot Chat extension and ask the following question:

```
How do I parse the selected AerobaticSequence string into a c# model using a regex expression?
```

- Copilot will suggest `AerobaticSequence` class and a `Parse` method.

> [!Note]
> GitHub Copilot is very good at understanding the context of the code. It understands that the `AerobaticSequence` is a string in a specific format and that it can be parsed using a Regex expression.

> Copilot Chat: "To parse the AerobaticSequence string into a C# model using a regex expression, you can create a model class AerobaticManeuver and a parser class AerobaticSequenceParser."

#### Step 6: - Flight Plan Adjustments - Codebase Improvements

> [!CAUTION]
> Do we want to add any more?  Remove this?.

- Engage in a chat with Copilot to discuss potential improvements in the codebase or selected sections of code.
- Introduce a context file to instruct Copilot on what to do and not to do, possibly aligning with company guidelines.
- Gradually apply Copilot's suggestions to the code. Consider using a .copilotignore file to refine Copilot's focus.
- Keep code quality reference files open for guidance and comparison.